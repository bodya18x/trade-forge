"""Централизованные исключения для Trading Engine."""

from __future__ import annotations


class TradingEngineError(Exception):
    """
    Базовое исключение для Trading Engine.

    Все кастомные исключения модуля наследуются от этого класса
    для упрощения обработки ошибок.
    """

    pass


class DataNotFoundError(TradingEngineError):
    """
    Данные не найдены в БД.

    Примеры использования:
    - Отсутствуют свечи в ClickHouse для заданного периода
    - Отсутствуют индикаторы для стратегии
    - Не найдена запись о стратегии или бэктесте в PostgreSQL
    """

    pass


class InvalidStrategyError(TradingEngineError):
    """
    Невалидное определение стратегии.

    Примеры использования:
    - Отсутствуют обязательные поля в стратегии
    - Некорректная структура AST дерева
    - Отсутствуют entry или exit условия
    - Несовместимые параметры стратегии
    """

    pass


class IndicatorCalculationError(TradingEngineError):
    """
    Ошибка расчета индикаторов.

    Примеры использования:
    - Недостаточно данных для расчета индикатора
    - Некорректные параметры индикатора
    - Таймаут при ожидании результатов от Data Processor
    - Ошибка в формуле индикатора
    """

    pass


class BacktestExecutionError(TradingEngineError):
    """
    Ошибка выполнения бэктеста.

    Примеры использования:
    - Ошибка в логике симуляции
    - Некорректные расчеты метрик
    - Несоответствие данных ожиданиям
    - Ошибки при создании сделок
    """

    pass


class InsufficientDataError(TradingEngineError):
    """
    Недостаточно данных для бэктеста.

    Примеры использования:
    - Слишком короткий период данных (< минимального для индикаторов)
    - Пустой DataFrame
    - Отсутствуют обязательные OHLCV колонки
    - Недостаточно свечей для расчета стратегии
    """

    pass


class ConfigurationError(TradingEngineError):
    """
    Ошибка конфигурации сервиса.

    Примеры использования:
    - Некорректные настройки подключения к БД
    - Отсутствуют обязательные переменные окружения
    - Некорректные параметры BacktestConfig
    - Ошибки валидации настроек
    """

    pass
